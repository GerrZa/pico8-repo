pico-8 cartridge // http://www.pico-8.com
version 41
__lua__
--variable


function _init()
	p={
		sp=1,
		x=59,
		y=59,
		w=8,
		h=8,
		flx=false,
		dx=0,
		dy=0,
		max_dx=2,
		max_dy=3,
		acc=0.5,
		boost=4,
		anim=0,
		rn=false,
		jm=false,
		fl=false,
		sl=false,
		lan=false
	}
	gv=0.3
	fc=0.85

end


-->8
--update & draw

function _update()
	p_update()
	p_animate
end

function _draw()
	cls()
	map(0,0)
	spr(p.sp,p.x,p.y,1,1,p.flx)
end
-->8
--collision

function collide_map(o,a,f)
	--o = table need xywh
	local x=o.x local y=o.y
	local w=o.w local h=o.h
	
	local x1=0 local y1=0
	local x2=0 local y2=0
	
	if aim=="left" then
		x1=x-1 y1=y
		x2=x   y2=y+h-1
	elseif aim=="right" then
		x1=x+w   y1=y
		x2=x+w+1 y2=y+h-1
	elseif aim=="up" then
		x1=x+1			y1=y-1
		x2=x+w-1 y2=y
	elseif aim=="down" then
		x1=x			y1=y+h
		x2=x+w y2=y+h
	end
	
	x1/=8 y1/=8
	x2/=8 y2/=8
	
	if fget(mget(x1,y1),f)
	or fget(mget(x1,y2),f)
	or fget(mget(x2,y1),f)
	or fget(mget(x2,y2),f) then
		return true
	else
	return false
	end
end
-->8
--player

function player_update()
	p.dy+=gv
	p.dx*=friction
	
	if btn(⬅️) then
		p.dx-=p.acc
		p.running=true
		p.flx=true
	end
	if btn(➡️) then
		p.dx+=p.acc
		p.rn=true
		p.flx=false
	end
	
	if p.rn
	and not btn(⬅️)
	and not btn(➡️)
	and not p.fl
	and not p.jp then
		p.rn=false
		p.sl=true
	end
end
__gfx__
00000000004444400044444000044444000444440004444400044444000444440004444400000000000000000000000000000000000000000000000000000000
0000000000ccccc000ccccc00ccccccc0c0ccccc000cccccc00ccccc00ccccccc00ccccc04444400000000000000000000000000000000000000000000000000
007007000cf2ff200cf2ff20c00ff22fc0cff22fcccff22f0ccff22f0c0ff22f0ccff22f0ccccc00000000000000000000000000000000000000000000000000
000770000cfffff00cfffff0000fffff000fffff000fffff000fffffc00fffff000fffffcf2ff200000000000000000000000000000000000000000000000000
00077000000cc00000cccc000fccc0000fccc0000fccc0000fccc00000ccc0000000ccc0cfffff00000000000000000000000000000000000000000000000000
0070070000cccc000f0cc0f0000cc000000cc000000cc000000cc0000f0cc0000000cc0f00ccccf0000000000000000000000000000000000000000000000000
000000000f0cd0f0000cd0000cc0d00000cd00000dd0c00000dc000000dc000000000cd00f0ccd00000000000000000000000000000000000000000000000000
0000000000c00d0000c00d000000d00000cd00000000c00000dc00000dc00000000000cd0000ccd0000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
bbbbbbbbbbbbbbbbbbbbbbbb00bbbbbbbbbbbb000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
bbbbbbb33bbbb4bbbbbbbbb30bbbbbb33bbbbbb00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4b344b344b3444433bb34b34bbb34b3444bb3bbb0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
43444b444b44454443444b44bb344b4443b443bb0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
444543544344444444444345bb454354444454bb0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
444444444544444454444444bb344444444443bb0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
454444444444445444454444bbb344444543bbbb0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
444444444444444444444444bb444444444444bb0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
44444444444444444444444400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
44444344444444444444444400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4444444444d444c44441444400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
48444444444444444444444400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
44444444444444444444444400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4449444444444e444944424400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
44444444444444444444444400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
44444444444444444444444400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
33331133333311334444224444442244000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
bbbb3bbbbbbb3bbb9999499999994999000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
bbb3bbbbbbb3bbbb9994999999949999000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
11113311111133112222442222224422000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
b3bbbb3bb3bbbb3b9499994994999949000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
bb3bbb3bbb3bbb3b9949994999499949000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
33111133331111334422224444222244000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
003bb300000000000049940000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
003bb300000000000049940000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001bb300001bb3000029940000299400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0013b3000013b3000024940000249400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
003b3100003b31000049420000494200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
003bb100003bb1000049920000499200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
003bb300003bb3000049940000499400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00133100001331000024420000244200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
003bb300003bb3000049940000499400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__gff__
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003030303030000000000000000000000030303000000000000000000000000000101010100000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0071000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0073000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0071000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0073000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
7171000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
7173000000000000006362626300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
7171000062620000000072720000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
7171000072720000616061616061000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
7171000043440000007000007000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
7171004351524400007000007000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4040415052515240404142424040424100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
5151505052515052525150505151505000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
5050515152525150525150515052515000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
